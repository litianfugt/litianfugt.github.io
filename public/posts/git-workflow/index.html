<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Git工作流程：从入门到精通 | 李石原的博客</title>
<meta name="keywords" content="Git, 版本控制, 工作流程, 分支管理, 协作开发">
<meta name="description" content="本文详细介绍了Git的工作流程，包括基本命令、分支管理、协作模式以及最佳实践，帮助开发者高效使用Git进行版本控制。">
<meta name="author" content="李石原">
<link rel="canonical" href="http://localhost:1313/posts/git-workflow/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f905f6bd9131e1901e24515747bd41310999ca99e8f1f0c8628e79c7a392a346.css" integrity="sha256-&#43;QX2vZEx4ZAeJFFXR71BMQmZypno8fDIYo55x6OSo0Y=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/git-workflow/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><link rel="stylesheet" href="http://localhost:1313/css/custom.css"><script src="/github-gist-config.js" defer></script><script src="/js/progress-bar.js" defer></script><meta property="og:url" content="http://localhost:1313/posts/git-workflow/">
  <meta property="og:site_name" content="李石原的博客">
  <meta property="og:title" content="Git工作流程：从入门到精通">
  <meta property="og:description" content="本文详细介绍了Git的工作流程，包括基本命令、分支管理、协作模式以及最佳实践，帮助开发者高效使用Git进行版本控制。">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-09-10T00:00:00+08:00">
    <meta property="article:modified_time" content="2025-09-10T00:00:00+08:00">
    <meta property="article:tag" content="Git">
    <meta property="article:tag" content="版本控制">
    <meta property="article:tag" content="开发工具">
    <meta property="og:image" content="http://localhost:1313/images/git-workflow.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:1313/images/git-workflow.jpg">
<meta name="twitter:title" content="Git工作流程：从入门到精通">
<meta name="twitter:description" content="本文详细介绍了Git的工作流程，包括基本命令、分支管理、协作模式以及最佳实践，帮助开发者高效使用Git进行版本控制。">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "文章",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Git工作流程：从入门到精通",
      "item": "http://localhost:1313/posts/git-workflow/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Git工作流程：从入门到精通",
  "name": "Git工作流程：从入门到精通",
  "description": "本文详细介绍了Git的工作流程，包括基本命令、分支管理、协作模式以及最佳实践，帮助开发者高效使用Git进行版本控制。",
  "keywords": [
    "Git", "版本控制", "工作流程", "分支管理", "协作开发"
  ],
  "articleBody": "Git工作流程：从入门到精通 Git是目前最流行的分布式版本控制系统，它不仅能够帮助开发者管理代码版本，还能促进团队协作。本文将详细介绍Git的工作流程，从基本命令到高级技巧，帮助你全面掌握Git的使用方法。\nGit基础概念 什么是Git？ Git是一个开源的分布式版本控制系统，由Linus Torvalds于2005年创建。与集中式版本控制系统（如SVN）不同，Git的每个开发者都拥有完整的代码仓库副本，这使得Git在速度、数据完整性和支持分布式开发方面具有明显优势。\nGit的基本工作区 Git有三个主要的工作区：\n工作区(Working Directory)：你当前正在工作的目录，包含项目的所有文件。 暂存区(Staging Area)：也称为\"索引(Index)\"，是一个临时保存修改的地方。 本地仓库(Local Repository)：Git保存项目元数据和对象数据库的地方。 此外，还有一个远程仓库(Remote Repository)，通常是托管在GitHub、GitLab等平台上的仓库，用于团队协作和备份。\nGit的基本工作流程 Git的基本工作流程如下：\n在工作区修改文件 使用git add将修改添加到暂存区 使用git commit将暂存区的内容提交到本地仓库 使用git push将本地仓库的修改推送到远程仓库 Git基本命令 初始化配置 配置用户信息 1 2 3 4 5 6 7 8 # 配置全局用户名 git config --global user.name \"Your Name\" # 配置全局邮箱 git config --global user.email \"your.email@example.com\" # 查看配置 git config --list 初始化仓库 1 2 3 4 5 # 在当前目录初始化Git仓库 git init # 克隆远程仓库 git clone https://github.com/username/repository.git 基本操作 查看状态 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # 查看工作区状态 git status # 显示当前文件修改情况 # 查看简化状态 git status -s # 简化输出，适合快速查看 # 查看提交历史 git log # 显示详细提交记录 # 查看简洁提交历史 git log --oneline # 每条提交一行，便于快速浏览 # 查看图形化提交历史 git log --graph --oneline --all 添加和提交 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # 添加指定文件到暂存区 git add filename # 添加所有修改到暂存区 git add . # 添加所有修改（包括新文件）到暂存区 git add -A # 提交暂存区内容 git commit -m \"Commit message\" # 跳过暂存区直接提交 git commit -a -m \"Commit message\" # 修改最后一次提交信息 git commit --amend 查看和比较 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # 查看工作区与暂存区的差异 git diff # 查看暂存区与本地仓库的差异 git diff --staged # 查看工作区与本地仓库的差异 git diff HEAD # 查看指定文件的差异 git diff filename # 查看指定提交的差异 git diff commit1 commit2 撤销操作 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # 撤销工作区的修改（恢复到暂存区状态） git checkout -- filename # 撤销暂存区的修改（恢复到工作区状态） git reset HEAD filename # 撤销最后一次提交（保留修改） git reset --soft HEAD~1 # 撤销最后一次提交（丢弃修改） git reset --hard HEAD~1 # 撤销多次提交（保留修改） git reset --soft HEAD~n # 撤销多次提交（丢弃修改） git reset --hard HEAD~n 远程仓库操作 添加和管理远程仓库 1 2 3 4 5 6 7 8 9 10 11 # 查看远程仓库 git remote -v # 添加远程仓库 git remote add origin https://github.com/username/repository.git # 删除远程仓库 git remote remove origin # 修改远程仓库URL git remote set-url origin https://github.com/username/new-repository.git 推送和拉取 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # 推送到远程仓库 git push origin main # 推送并设置上游分支 git push -u origin main # 拉取远程仓库的修改 git pull origin main # 获取远程仓库的修改（不合并） git fetch origin # 合并远程分支到当前分支 git merge origin/main 分支管理 分支的基本操作 创建和切换分支 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # 创建新分支 git branch feature-branch # 切换到指定分支 git checkout feature-branch # 创建并切换到新分支 git checkout -b feature-branch # 查看所有分支 git branch -a # 查看本地分支 git branch # 查看远程分支 git branch -r 合并分支 1 2 3 4 5 6 7 8 9 10 11 # 切换到目标分支 git checkout main # 合并指定分支到当前分支 git merge feature-branch # 删除已合并的分支 git branch -d feature-branch # 强制删除分支（即使未合并） git branch -D feature-branch 解决合并冲突 当合并分支时，如果两个分支对同一文件的同一部分进行了不同的修改，就会产生合并冲突。解决合并冲突的步骤如下：\n执行git merge命令，Git会标记冲突文件 打开冲突文件，查看冲突标记（\u003c\u003c\u003c\u003c\u003c\u003c\u003c, =======, \u003e\u003e\u003e\u003e\u003e\u003e\u003e） 手动编辑文件，解决冲突 使用git add标记冲突已解决 使用git commit完成合并 1 2 3 4 5 6 7 8 9 10 11 # 合并分支（假设产生冲突） git merge feature-branch # 查看冲突状态 git status # 手动解决冲突后，标记已解决 git add conflicted-file # 完成合并 git commit 变基(Rebase) 变基是将一系列提交应用到另一个分支上的操作，它可以使提交历史更加线性。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 # 变基当前分支到目标分支 git rebase main # 变基指定分支到目标分支 git rebase main feature-branch # 交互式变基（可以编辑、删除、合并提交） git rebase -i HEAD~3 # 继续变基（解决冲突后） git rebase --continue # 取消变基 git rebase --abort 标签管理 标签用于标记重要的提交点，通常用于版本发布。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 # 创建轻量标签 git tag v1.0.0 # 创建带注释的标签 git tag -a v1.0.0 -m \"Version 1.0.0 release\" # 查看所有标签 git tag # 查看标签信息 git show v1.0.0 # 推送标签到远程仓库 git push origin v1.0.0 # 推送所有标签到远程仓库 git push origin --tags # 删除本地标签 git tag -d v1.0.0 # 删除远程标签 git push origin :refs/tags/v1.0.0 Git工作流模型 集中式工作流 集中式工作流是最简单的工作流，类似于SVN的工作方式。所有开发者直接在主分支上工作，适合小型项目或个人项目。\n工作流程：\n克隆仓库 在主分支上修改代码 提交修改 推送到远程仓库 优点：\n简单直观 无需学习分支管理 缺点：\n容易产生冲突 不适合团队协作 功能分支工作流 功能分支工作流为每个新功能创建一个独立的分支，开发完成后再合并到主分支。\n工作流程：\n从主分支创建功能分支 在功能分支上开发 完成后合并回主分支 删除功能分支 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # 创建功能分支 git checkout -b feature/new-feature main # 开发功能... # 提交修改 git commit -a -m \"Add new feature\" # 切换到主分支 git checkout main # 合并功能分支 git merge feature/new-feature # 删除功能分支 git branch -d feature/new-feature 优点：\n功能隔离，减少冲突 主分支保持稳定 便于代码审查 缺点：\n需要管理多个分支 合并可能产生冲突 Git Flow工作流 Git Flow是一种更复杂的工作流，定义了严格的分支模型，适用于大型项目和正式发布。\n分支类型：\nmain：主分支，始终保持可发布状态 develop：开发分支，集成所有功能 feature：功能分支，从develop创建，完成后合并回develop release：发布分支，从develop创建，用于准备发布 hotfix：修复分支，从main创建，用于紧急修复 工作流程：\n从develop创建功能分支 在功能分支上开发 完成后合并回develop 从develop创建发布分支 测试和修复 合并发布分支到main和develop 从main创建修复分支 修复后合并到main和develop 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # 初始化Git Flow git flow init # 创建功能分支 git flow feature start new-feature # 完成功能分支 git flow feature finish new-feature # 创建发布分支 git flow release start v1.0.0 # 完成发布分支 git flow release finish v1.0.0 # 创建修复分支 git flow hotfix start critical-fix # 完成修复分支 git flow hotfix finish critical-fix 优点：\n结构清晰，职责明确 适合正式发布 支持紧急修复 缺点：\n流程复杂，学习成本高 分支管理繁琐 对于小型项目过于复杂 GitHub Flow工作流 GitHub Flow是GitHub使用的一种简化工作流，适合持续部署的项目。\n工作流程：\n从main分支创建功能分支 在功能分支上开发 推送到远程仓库 创建Pull Request 代码审查和讨论 合并到main分支 部署 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 # 创建功能分支 git checkout -b feature/new-feature main # 开发功能... # 提交修改 git commit -a -m \"Add new feature\" # 推送到远程仓库 git push origin feature/new-feature # 在GitHub上创建Pull Request # 审查通过后，合并到main分支 git checkout main git pull origin main git merge feature/new-feature git push origin main # 删除功能分支 git branch -d feature/new-feature git push origin --delete feature/new-feature 优点：\n简单明了 适合持续部署 便于代码审查 缺点：\n不适合需要长期维护多个版本的项目 缺少明确的发布流程 GitLab Flow工作流 GitLab Flow是GitLab推荐的工作流，结合了GitHub Flow和Git Flow的优点。\n工作流程：\n从main分支创建功能分支 在功能分支上开发 推送到远程仓库 创建Merge Request 代码审查和讨论 合并到main分支 从main创建环境分支（如staging、production） 部署到不同环境 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 # 创建功能分支 git checkout -b feature/new-feature main # 开发功能... # 提交修改 git commit -a -m \"Add new feature\" # 推送到远程仓库 git push origin feature/new-feature # 在GitLab上创建Merge Request # 审查通过后，合并到main分支 git checkout main git pull origin main git merge feature/new-feature git push origin main # 创建环境分支 git checkout -b production main git push origin production # 部署到生产环境 # ... 优点：\n简单且灵活 支持多环境部署 适合持续交付 缺点：\n环境分支管理需要额外工作 对于大型项目可能不够严格 Git高级技巧 钩子(Hooks) Git钩子是在特定事件发生时自动执行的脚本，可以用于自动化任务。\n常用钩子类型 客户端钩子：\npre-commit：提交前运行 commit-msg：编辑提交信息后运行 pre-push：推送前运行 服务器端钩子：\npre-receive：接收推送时运行 update：更新分支时运行 post-receive：接收推送后运行 示例：pre-commit钩子 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #!/bin/sh # .git/hooks/pre-commit # 检查代码风格 npm run lint # 如果检查失败，阻止提交 if [ $? -ne 0 ]; then echo \"代码风格检查失败，请修复后再提交\" exit 1 fi # 运行测试 npm test # 如果测试失败，阻止提交 if [ $? -ne 0 ]; then echo \"测试失败，请修复后再提交\" exit 1 fi 子模块(Submodules) Git子模块允许你将一个Git仓库作为另一个Git仓库的子目录。\n添加子模块 1 2 3 4 5 6 7 8 9 10 11 # 添加子模块 git submodule add https://github.com/username/submodule-repository.git path/to/submodule # 初始化子模块 git submodule init # 更新子模块 git submodule update # 递归克隆包含子模块的仓库 git clone --recursive https://github.com/username/repository.git 更新子模块 1 2 3 4 5 6 7 8 9 10 11 12 # 进入子模块目录 cd path/to/submodule # 拉取最新代码 git pull origin main # 返回主仓库 cd .. # 提交子模块更新 git add path/to/submodule git commit -m \"Update submodule\" 变基(Rebase)高级用法 交互式变基 交互式变基允许你编辑、删除、合并或重新排序提交。\n1 2 # 对最近的3个提交进行交互式变基 git rebase -i HEAD~3 在打开的编辑器中，你会看到类似这样的内容：\npick f7f3f6d Commit message 1 pick 310154e Commit message 2 pick a5f4a0d Commit message 3 # Rebase 1234567..a5f4a0d onto 1234567 (3 commands) # # Commands: # p, pick = use commit # r, reword = use commit, but edit the commit message # e, edit = use commit, but stop for amending # s, squash = use commit, but meld into previous commit # f, fixup = like \"squash\", but discard this commit's log message # x, exec = run command (the rest of the line) using shell # b, break = stop here (continue rebase later with 'git rebase --continue') # d, drop = remove commit # l, label = label current HEAD with a name # t, reset = reset HEAD to a label # m, merge [-C | -c ] [# ] # . create a merge commit using the original merge commit's # . message (or the oneline, if no original merge commit was # . specified). Use -c to re-use the original merge # . commit's author and message. # # These lines can be re-ordered; they are executed from top to bottom. 你可以通过修改命令前的关键字来改变提交的处理方式。\n变基 vs 合并 变基和合并都是整合分支更改的方法，但它们有不同的工作方式：\n合并(Merge)：\n创建一个新的\"合并提交\" 保留完整的分支历史 适合公共分支 变基(Rebase)：\n将提交重新应用到目标分支 创建线性的提交历史 适合私有分支 1 2 3 4 5 6 7 # 合并分支 git checkout main git merge feature-branch # 变基分支 git checkout feature-branch git rebase main 储藏(Stash) 储藏允许你临时保存未提交的修改，以便切换分支或执行其他操作。\n基本储藏操作 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 # 储藏当前修改 git stash # 储藏并添加说明 git stash save \"Work in progress\" # 查看储藏列表 git stash list # 应用最新储藏（不删除） git stash apply # 应用并删除最新储藏 git stash pop # 应用指定储藏 git stash apply stash@{1} # 删除指定储藏 git stash drop stash@{1} # 清除所有储藏 git stash clear 高级储藏操作 1 2 3 4 5 6 7 8 # 储藏未跟踪的文件 git stash -u # 储藏包括忽略的文件 git stash -a # 从储藏创建分支 git stash branch new-branch stash@{1} 签选(Cherry-pick) 签选允许你选择特定的提交，并将其应用到当前分支。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # 签选指定提交 git cherry-pick commit-hash # 签选但不提交 git cherry-pick -n commit-hash # 签选并编辑提交信息 git cherry-pick -e commit-hash # 签选多个提交 git cherry-pick commit1 commit2 commit3 # 签选一系列提交 git cherry-pick commit1..commit3 # 中止签选 git cherry-pick --abort # 继续签选（解决冲突后） git cherry-pick --continue 引用日志(Reflog) 引用日志记录了Git仓库中所有引用的更新，包括被删除的提交。\n1 2 3 4 5 6 7 8 9 10 11 # 查看引用日志 git reflog # 查看指定分支的引用日志 git reflog show main # 查看引用日志并显示差异 git reflog show --stat # 恢复被删除的提交 git reset --hard HEAD@{1} 二分查找(Bisect) 二分查找是一个强大的工具，用于快速定位引入问题的提交。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # 开始二分查找 git bisect start # 标记当前提交为有问题 git bisect bad # 标记已知正常的提交 git bisect good commit-hash # Git会自动切换到一个中间提交，测试后标记为good或bad git bisect good # 或 git bisect bad # 重复测试过程，直到找到问题提交 # 结束二分查找 git bisect reset Git最佳实践 提交规范 提交信息格式 良好的提交信息应该清晰、简洁，并遵循一定的格式：\n\u003c类型\u003e(\u003c范围\u003e): \u003c主题\u003e \u003c详细描述\u003e \u003c页脚\u003e 类型：\nfeat：新功能 fix：修复bug docs：文档更新 style：代码格式（不影响代码运行的变动） refactor：重构（既不是新增功能，也不是修改bug的代码变动） perf：性能优化 test：增加测试 chore：构建过程或辅助工具的变动 范围：可选，用于说明提交影响的范围，如docs, api, core等。\n主题：简洁描述提交内容，不超过50个字符。\n详细描述：可选，详细描述提交内容，每行不超过72个字符。\n页脚：可选，用于标记Breaking Changes或关闭Issue。\n示例提交信息 feat(api): add user authentication endpoint Add a new endpoint for user authentication using JWT tokens. The endpoint supports both username/password and social login methods. Closes #123 分支命名规范 良好的分支命名可以提高团队协作效率：\n\u003c类型\u003e/\u003c描述\u003e 例如： feature/user-authentication fix/login-bug docs/api-documentation refactor/user-service 代码审查 代码审查是保证代码质量的重要环节，以下是一些建议：\n保持小的提交：每次提交应该只关注一个功能或修复，便于审查。 提供清晰的描述：在Pull Request中详细说明修改内容和原因。 自动化检查：使用CI/CD工具自动运行测试和代码风格检查。 关注代码逻辑：不仅关注代码风格，还要关注逻辑正确性和性能。 提供建设性反馈：尊重他人，提供具体、可操作的建议。 常见问题解决 撤销已推送的提交 1 2 3 4 5 6 7 # 方法1：创建新的提交来撤销 git revert commit-hash git push origin main # 方法2：强制推送（谨慎使用） git reset --hard HEAD~1 git push --force origin main 合并错误的分支 1 2 3 4 5 # 撤销合并 git reset --hard HEAD~1 # 如果已经推送 git revert -m 1 commit-hash 清理历史记录 1 2 3 4 5 # 交互式变基清理历史 git rebase -i HEAD~n # 强制推送（谨慎使用） git push --force origin main 处理大文件 1 2 3 4 5 6 7 8 9 10 # 查找大文件 git rev-list --objects --all | git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' | sed -n 's/^blob //p' | sort -nrk 2 | head -n 10 # 使用BFG Repo-Cleaner清理大文件 java -jar bfg.jar --strip-blobs-bigger-than 100M my-repo.git # 清理并推送 git reflog expire --expire=now --all git gc --prune=now --aggressive git push --force origin main 总结 Git是一个功能强大的版本控制系统，掌握其工作流程对于现代软件开发至关重要。本文从Git的基本概念和命令开始，逐步介绍了分支管理、各种工作流模型以及高级技巧。\n通过学习和实践这些内容，你可以：\n高效管理个人项目的版本 与团队成员协作开发 处理复杂的合并和冲突 使用高级功能提高工作效率 记住，Git的强大之处在于其灵活性，你可以根据项目需求选择合适的工作流程和工具。同时，良好的实践习惯（如清晰的提交信息、规范的分支命名）将使你的开发过程更加顺畅。\n最后，Git是一个不断发展的工具，持续学习和探索新功能将帮助你更好地利用这个强大的版本控制系统。希望本文能够帮助你掌握Git工作流程，提高开发效率。\n",
  "wordCount" : "6079",
  "inLanguage": "zh",
  "image":"http://localhost:1313/images/git-workflow.jpg","datePublished": "2025-09-10T00:00:00+08:00",
  "dateModified": "2025-09-10T00:00:00+08:00",
  "author":{
    "@type": "Person",
    "name": "李石原"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/git-workflow/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "李石原的博客",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="首页 (Alt + H)">
                <img src="http://localhost:1313/apple-touch-icon.png" alt="" aria-label="logo"
                    height="35">首页</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="首页">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="文章">
                    <span>文章</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/" title="分类">
                    <span>分类</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/thoughts/" title="随想">
                    <span>随想</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">文章</a></div>
    <h1 class="post-title entry-hint-parent">
      Git工作流程：从入门到精通
    </h1>
    <div class="post-description">
      本文详细介绍了Git的工作流程，包括基本命令、分支管理、协作模式以及最佳实践，帮助开发者高效使用Git进行版本控制。
    </div>
    <div class="post-meta"><span title='2025-09-10 00:00:00 +0800 CST'>九月 10, 2025</span>&nbsp;·&nbsp;13 分钟&nbsp;·&nbsp;6079 字&nbsp;·&nbsp;李石原

</div>
  </header> 
<figure class="entry-cover">
        <img loading="eager" src="http://localhost:1313/images/git-workflow.jpg" alt="Git工作流程">
        <figcaption>掌握Git工作流程，提高开发效率</figcaption>
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#git基础概念">Git基础概念</a>
      <ul>
        <li><a href="#什么是git">什么是Git？</a></li>
        <li><a href="#git的基本工作区">Git的基本工作区</a></li>
        <li><a href="#git的基本工作流程">Git的基本工作流程</a></li>
      </ul>
    </li>
    <li><a href="#git基本命令">Git基本命令</a>
      <ul>
        <li><a href="#初始化配置">初始化配置</a></li>
        <li><a href="#基本操作">基本操作</a></li>
        <li><a href="#远程仓库操作">远程仓库操作</a></li>
      </ul>
    </li>
    <li><a href="#分支管理">分支管理</a>
      <ul>
        <li><a href="#分支的基本操作">分支的基本操作</a></li>
        <li><a href="#变基rebase">变基(Rebase)</a></li>
        <li><a href="#标签管理">标签管理</a></li>
      </ul>
    </li>
    <li><a href="#git工作流模型">Git工作流模型</a>
      <ul>
        <li><a href="#集中式工作流">集中式工作流</a></li>
        <li><a href="#功能分支工作流">功能分支工作流</a></li>
        <li><a href="#git-flow工作流">Git Flow工作流</a></li>
        <li><a href="#github-flow工作流">GitHub Flow工作流</a></li>
        <li><a href="#gitlab-flow工作流">GitLab Flow工作流</a></li>
      </ul>
    </li>
    <li><a href="#git高级技巧">Git高级技巧</a>
      <ul>
        <li><a href="#钩子hooks">钩子(Hooks)</a></li>
        <li><a href="#子模块submodules">子模块(Submodules)</a></li>
        <li><a href="#变基rebase高级用法">变基(Rebase)高级用法</a></li>
        <li><a href="#储藏stash">储藏(Stash)</a></li>
        <li><a href="#签选cherry-pick">签选(Cherry-pick)</a></li>
        <li><a href="#引用日志reflog">引用日志(Reflog)</a></li>
        <li><a href="#二分查找bisect">二分查找(Bisect)</a></li>
      </ul>
    </li>
    <li><a href="#git最佳实践">Git最佳实践</a>
      <ul>
        <li><a href="#提交规范">提交规范</a></li>
        <li><a href="#分支命名规范">分支命名规范</a></li>
        <li><a href="#代码审查">代码审查</a></li>
        <li><a href="#常见问题解决">常见问题解决</a></li>
      </ul>
    </li>
    <li><a href="#总结">总结</a></li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="git工作流程从入门到精通">Git工作流程：从入门到精通<a hidden class="anchor" aria-hidden="true" href="#git工作流程从入门到精通">#</a></h1>
<p>Git是目前最流行的分布式版本控制系统，它不仅能够帮助开发者管理代码版本，还能促进团队协作。本文将详细介绍Git的工作流程，从基本命令到高级技巧，帮助你全面掌握Git的使用方法。</p>
<h2 id="git基础概念">Git基础概念<a hidden class="anchor" aria-hidden="true" href="#git基础概念">#</a></h2>
<h3 id="什么是git">什么是Git？<a hidden class="anchor" aria-hidden="true" href="#什么是git">#</a></h3>
<p>Git是一个开源的分布式版本控制系统，由Linus Torvalds于2005年创建。与集中式版本控制系统（如SVN）不同，Git的每个开发者都拥有完整的代码仓库副本，这使得Git在速度、数据完整性和支持分布式开发方面具有明显优势。</p>
<h3 id="git的基本工作区">Git的基本工作区<a hidden class="anchor" aria-hidden="true" href="#git的基本工作区">#</a></h3>
<p>Git有三个主要的工作区：</p>
<ol>
<li><strong>工作区(Working Directory)</strong>：你当前正在工作的目录，包含项目的所有文件。</li>
<li><strong>暂存区(Staging Area)</strong>：也称为&quot;索引(Index)&quot;，是一个临时保存修改的地方。</li>
<li><strong>本地仓库(Local Repository)</strong>：Git保存项目元数据和对象数据库的地方。</li>
</ol>
<p>此外，还有一个<strong>远程仓库(Remote Repository)</strong>，通常是托管在GitHub、GitLab等平台上的仓库，用于团队协作和备份。</p>
<h3 id="git的基本工作流程">Git的基本工作流程<a hidden class="anchor" aria-hidden="true" href="#git的基本工作流程">#</a></h3>
<p>Git的基本工作流程如下：</p>
<ol>
<li>在工作区修改文件</li>
<li>使用<code>git add</code>将修改添加到暂存区</li>
<li>使用<code>git commit</code>将暂存区的内容提交到本地仓库</li>
<li>使用<code>git push</code>将本地仓库的修改推送到远程仓库</li>
</ol>
<h2 id="git基本命令">Git基本命令<a hidden class="anchor" aria-hidden="true" href="#git基本命令">#</a></h2>
<h3 id="初始化配置">初始化配置<a hidden class="anchor" aria-hidden="true" href="#初始化配置">#</a></h3>
<h4 id="配置用户信息">配置用户信息<a hidden class="anchor" aria-hidden="true" href="#配置用户信息">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 配置全局用户名</span>
</span></span><span class="line"><span class="cl">git config --global user.name <span class="s2">&#34;Your Name&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 配置全局邮箱</span>
</span></span><span class="line"><span class="cl">git config --global user.email <span class="s2">&#34;your.email@example.com&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看配置</span>
</span></span><span class="line"><span class="cl">git config --list
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="初始化仓库">初始化仓库<a hidden class="anchor" aria-hidden="true" href="#初始化仓库">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 在当前目录初始化Git仓库</span>
</span></span><span class="line"><span class="cl">git init
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 克隆远程仓库</span>
</span></span><span class="line"><span class="cl">git clone https://github.com/username/repository.git
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="基本操作">基本操作<a hidden class="anchor" aria-hidden="true" href="#基本操作">#</a></h3>
<h4 id="查看状态">查看状态<a hidden class="anchor" aria-hidden="true" href="#查看状态">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看工作区状态</span>
</span></span><span class="line"><span class="cl">git status  <span class="c1"># 显示当前文件修改情况</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看简化状态</span>
</span></span><span class="line"><span class="cl">git status -s  <span class="c1"># 简化输出，适合快速查看</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看提交历史</span>
</span></span><span class="line"><span class="cl">git log  <span class="c1"># 显示详细提交记录</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看简洁提交历史</span>
</span></span><span class="line"><span class="cl">git log --oneline  <span class="c1"># 每条提交一行，便于快速浏览</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看图形化提交历史</span>
</span></span><span class="line"><span class="cl">git log --graph --oneline --all
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="添加和提交">添加和提交<a hidden class="anchor" aria-hidden="true" href="#添加和提交">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 添加指定文件到暂存区</span>
</span></span><span class="line"><span class="cl">git add filename
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加所有修改到暂存区</span>
</span></span><span class="line"><span class="cl">git add .
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加所有修改（包括新文件）到暂存区</span>
</span></span><span class="line"><span class="cl">git add -A
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 提交暂存区内容</span>
</span></span><span class="line"><span class="cl">git commit -m <span class="s2">&#34;Commit message&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 跳过暂存区直接提交</span>
</span></span><span class="line"><span class="cl">git commit -a -m <span class="s2">&#34;Commit message&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 修改最后一次提交信息</span>
</span></span><span class="line"><span class="cl">git commit --amend
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="查看和比较">查看和比较<a hidden class="anchor" aria-hidden="true" href="#查看和比较">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 查看工作区与暂存区的差异</span>
</span></span><span class="line"><span class="cl">git diff
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看暂存区与本地仓库的差异</span>
</span></span><span class="line"><span class="cl">git diff --staged
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看工作区与本地仓库的差异</span>
</span></span><span class="line"><span class="cl">git diff HEAD
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看指定文件的差异</span>
</span></span><span class="line"><span class="cl">git diff filename
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看指定提交的差异</span>
</span></span><span class="line"><span class="cl">git diff commit1 commit2
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="撤销操作">撤销操作<a hidden class="anchor" aria-hidden="true" href="#撤销操作">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 撤销工作区的修改（恢复到暂存区状态）</span>
</span></span><span class="line"><span class="cl">git checkout -- filename
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 撤销暂存区的修改（恢复到工作区状态）</span>
</span></span><span class="line"><span class="cl">git reset HEAD filename
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 撤销最后一次提交（保留修改）</span>
</span></span><span class="line"><span class="cl">git reset --soft HEAD~1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 撤销最后一次提交（丢弃修改）</span>
</span></span><span class="line"><span class="cl">git reset --hard HEAD~1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 撤销多次提交（保留修改）</span>
</span></span><span class="line"><span class="cl">git reset --soft HEAD~n
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 撤销多次提交（丢弃修改）</span>
</span></span><span class="line"><span class="cl">git reset --hard HEAD~n
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="远程仓库操作">远程仓库操作<a hidden class="anchor" aria-hidden="true" href="#远程仓库操作">#</a></h3>
<h4 id="添加和管理远程仓库">添加和管理远程仓库<a hidden class="anchor" aria-hidden="true" href="#添加和管理远程仓库">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 查看远程仓库</span>
</span></span><span class="line"><span class="cl">git remote -v
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加远程仓库</span>
</span></span><span class="line"><span class="cl">git remote add origin https://github.com/username/repository.git
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除远程仓库</span>
</span></span><span class="line"><span class="cl">git remote remove origin
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 修改远程仓库URL</span>
</span></span><span class="line"><span class="cl">git remote set-url origin https://github.com/username/new-repository.git
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="推送和拉取">推送和拉取<a hidden class="anchor" aria-hidden="true" href="#推送和拉取">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 推送到远程仓库</span>
</span></span><span class="line"><span class="cl">git push origin main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 推送并设置上游分支</span>
</span></span><span class="line"><span class="cl">git push -u origin main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 拉取远程仓库的修改</span>
</span></span><span class="line"><span class="cl">git pull origin main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 获取远程仓库的修改（不合并）</span>
</span></span><span class="line"><span class="cl">git fetch origin
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 合并远程分支到当前分支</span>
</span></span><span class="line"><span class="cl">git merge origin/main
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="分支管理">分支管理<a hidden class="anchor" aria-hidden="true" href="#分支管理">#</a></h2>
<h3 id="分支的基本操作">分支的基本操作<a hidden class="anchor" aria-hidden="true" href="#分支的基本操作">#</a></h3>
<h4 id="创建和切换分支">创建和切换分支<a hidden class="anchor" aria-hidden="true" href="#创建和切换分支">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 创建新分支</span>
</span></span><span class="line"><span class="cl">git branch feature-branch
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 切换到指定分支</span>
</span></span><span class="line"><span class="cl">git checkout feature-branch
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建并切换到新分支</span>
</span></span><span class="line"><span class="cl">git checkout -b feature-branch
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看所有分支</span>
</span></span><span class="line"><span class="cl">git branch -a
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看本地分支</span>
</span></span><span class="line"><span class="cl">git branch
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看远程分支</span>
</span></span><span class="line"><span class="cl">git branch -r
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="合并分支">合并分支<a hidden class="anchor" aria-hidden="true" href="#合并分支">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 切换到目标分支</span>
</span></span><span class="line"><span class="cl">git checkout main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 合并指定分支到当前分支</span>
</span></span><span class="line"><span class="cl">git merge feature-branch
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除已合并的分支</span>
</span></span><span class="line"><span class="cl">git branch -d feature-branch
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 强制删除分支（即使未合并）</span>
</span></span><span class="line"><span class="cl">git branch -D feature-branch
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="解决合并冲突">解决合并冲突<a hidden class="anchor" aria-hidden="true" href="#解决合并冲突">#</a></h4>
<p>当合并分支时，如果两个分支对同一文件的同一部分进行了不同的修改，就会产生合并冲突。解决合并冲突的步骤如下：</p>
<ol>
<li>执行<code>git merge</code>命令，Git会标记冲突文件</li>
<li>打开冲突文件，查看冲突标记（<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>, <code>=======</code>, <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>）</li>
<li>手动编辑文件，解决冲突</li>
<li>使用<code>git add</code>标记冲突已解决</li>
<li>使用<code>git commit</code>完成合并</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 合并分支（假设产生冲突）</span>
</span></span><span class="line"><span class="cl">git merge feature-branch
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看冲突状态</span>
</span></span><span class="line"><span class="cl">git status
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 手动解决冲突后，标记已解决</span>
</span></span><span class="line"><span class="cl">git add conflicted-file
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 完成合并</span>
</span></span><span class="line"><span class="cl">git commit
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="变基rebase">变基(Rebase)<a hidden class="anchor" aria-hidden="true" href="#变基rebase">#</a></h3>
<p>变基是将一系列提交应用到另一个分支上的操作，它可以使提交历史更加线性。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 变基当前分支到目标分支</span>
</span></span><span class="line"><span class="cl">git rebase main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 变基指定分支到目标分支</span>
</span></span><span class="line"><span class="cl">git rebase main feature-branch
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 交互式变基（可以编辑、删除、合并提交）</span>
</span></span><span class="line"><span class="cl">git rebase -i HEAD~3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 继续变基（解决冲突后）</span>
</span></span><span class="line"><span class="cl">git rebase --continue
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 取消变基</span>
</span></span><span class="line"><span class="cl">git rebase --abort
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="标签管理">标签管理<a hidden class="anchor" aria-hidden="true" href="#标签管理">#</a></h3>
<p>标签用于标记重要的提交点，通常用于版本发布。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 创建轻量标签</span>
</span></span><span class="line"><span class="cl">git tag v1.0.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建带注释的标签</span>
</span></span><span class="line"><span class="cl">git tag -a v1.0.0 -m <span class="s2">&#34;Version 1.0.0 release&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看所有标签</span>
</span></span><span class="line"><span class="cl">git tag
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看标签信息</span>
</span></span><span class="line"><span class="cl">git show v1.0.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 推送标签到远程仓库</span>
</span></span><span class="line"><span class="cl">git push origin v1.0.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 推送所有标签到远程仓库</span>
</span></span><span class="line"><span class="cl">git push origin --tags
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除本地标签</span>
</span></span><span class="line"><span class="cl">git tag -d v1.0.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除远程标签</span>
</span></span><span class="line"><span class="cl">git push origin :refs/tags/v1.0.0
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="git工作流模型">Git工作流模型<a hidden class="anchor" aria-hidden="true" href="#git工作流模型">#</a></h2>
<h3 id="集中式工作流">集中式工作流<a hidden class="anchor" aria-hidden="true" href="#集中式工作流">#</a></h3>
<p>集中式工作流是最简单的工作流，类似于SVN的工作方式。所有开发者直接在主分支上工作，适合小型项目或个人项目。</p>
<p><strong>工作流程：</strong></p>
<ol>
<li>克隆仓库</li>
<li>在主分支上修改代码</li>
<li>提交修改</li>
<li>推送到远程仓库</li>
</ol>
<p><strong>优点：</strong></p>
<ul>
<li>简单直观</li>
<li>无需学习分支管理</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>容易产生冲突</li>
<li>不适合团队协作</li>
</ul>
<h3 id="功能分支工作流">功能分支工作流<a hidden class="anchor" aria-hidden="true" href="#功能分支工作流">#</a></h3>
<p>功能分支工作流为每个新功能创建一个独立的分支，开发完成后再合并到主分支。</p>
<p><strong>工作流程：</strong></p>
<ol>
<li>从主分支创建功能分支</li>
<li>在功能分支上开发</li>
<li>完成后合并回主分支</li>
<li>删除功能分支</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 创建功能分支</span>
</span></span><span class="line"><span class="cl">git checkout -b feature/new-feature main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 开发功能...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 提交修改</span>
</span></span><span class="line"><span class="cl">git commit -a -m <span class="s2">&#34;Add new feature&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 切换到主分支</span>
</span></span><span class="line"><span class="cl">git checkout main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 合并功能分支</span>
</span></span><span class="line"><span class="cl">git merge feature/new-feature
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除功能分支</span>
</span></span><span class="line"><span class="cl">git branch -d feature/new-feature
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>优点：</strong></p>
<ul>
<li>功能隔离，减少冲突</li>
<li>主分支保持稳定</li>
<li>便于代码审查</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>需要管理多个分支</li>
<li>合并可能产生冲突</li>
</ul>
<h3 id="git-flow工作流">Git Flow工作流<a hidden class="anchor" aria-hidden="true" href="#git-flow工作流">#</a></h3>
<p>Git Flow是一种更复杂的工作流，定义了严格的分支模型，适用于大型项目和正式发布。</p>
<p><strong>分支类型：</strong></p>
<ul>
<li><strong>main</strong>：主分支，始终保持可发布状态</li>
<li><strong>develop</strong>：开发分支，集成所有功能</li>
<li><strong>feature</strong>：功能分支，从develop创建，完成后合并回develop</li>
<li><strong>release</strong>：发布分支，从develop创建，用于准备发布</li>
<li><strong>hotfix</strong>：修复分支，从main创建，用于紧急修复</li>
</ul>
<p><strong>工作流程：</strong></p>
<ol>
<li>从develop创建功能分支</li>
<li>在功能分支上开发</li>
<li>完成后合并回develop</li>
<li>从develop创建发布分支</li>
<li>测试和修复</li>
<li>合并发布分支到main和develop</li>
<li>从main创建修复分支</li>
<li>修复后合并到main和develop</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 初始化Git Flow</span>
</span></span><span class="line"><span class="cl">git flow init
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建功能分支</span>
</span></span><span class="line"><span class="cl">git flow feature start new-feature
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 完成功能分支</span>
</span></span><span class="line"><span class="cl">git flow feature finish new-feature
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建发布分支</span>
</span></span><span class="line"><span class="cl">git flow release start v1.0.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 完成发布分支</span>
</span></span><span class="line"><span class="cl">git flow release finish v1.0.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建修复分支</span>
</span></span><span class="line"><span class="cl">git flow hotfix start critical-fix
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 完成修复分支</span>
</span></span><span class="line"><span class="cl">git flow hotfix finish critical-fix
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>优点：</strong></p>
<ul>
<li>结构清晰，职责明确</li>
<li>适合正式发布</li>
<li>支持紧急修复</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>流程复杂，学习成本高</li>
<li>分支管理繁琐</li>
<li>对于小型项目过于复杂</li>
</ul>
<h3 id="github-flow工作流">GitHub Flow工作流<a hidden class="anchor" aria-hidden="true" href="#github-flow工作流">#</a></h3>
<p>GitHub Flow是GitHub使用的一种简化工作流，适合持续部署的项目。</p>
<p><strong>工作流程：</strong></p>
<ol>
<li>从main分支创建功能分支</li>
<li>在功能分支上开发</li>
<li>推送到远程仓库</li>
<li>创建Pull Request</li>
<li>代码审查和讨论</li>
<li>合并到main分支</li>
<li>部署</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 创建功能分支</span>
</span></span><span class="line"><span class="cl">git checkout -b feature/new-feature main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 开发功能...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 提交修改</span>
</span></span><span class="line"><span class="cl">git commit -a -m <span class="s2">&#34;Add new feature&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 推送到远程仓库</span>
</span></span><span class="line"><span class="cl">git push origin feature/new-feature
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 在GitHub上创建Pull Request</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 审查通过后，合并到main分支</span>
</span></span><span class="line"><span class="cl">git checkout main
</span></span><span class="line"><span class="cl">git pull origin main
</span></span><span class="line"><span class="cl">git merge feature/new-feature
</span></span><span class="line"><span class="cl">git push origin main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除功能分支</span>
</span></span><span class="line"><span class="cl">git branch -d feature/new-feature
</span></span><span class="line"><span class="cl">git push origin --delete feature/new-feature
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>优点：</strong></p>
<ul>
<li>简单明了</li>
<li>适合持续部署</li>
<li>便于代码审查</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>不适合需要长期维护多个版本的项目</li>
<li>缺少明确的发布流程</li>
</ul>
<h3 id="gitlab-flow工作流">GitLab Flow工作流<a hidden class="anchor" aria-hidden="true" href="#gitlab-flow工作流">#</a></h3>
<p>GitLab Flow是GitLab推荐的工作流，结合了GitHub Flow和Git Flow的优点。</p>
<p><strong>工作流程：</strong></p>
<ol>
<li>从main分支创建功能分支</li>
<li>在功能分支上开发</li>
<li>推送到远程仓库</li>
<li>创建Merge Request</li>
<li>代码审查和讨论</li>
<li>合并到main分支</li>
<li>从main创建环境分支（如staging、production）</li>
<li>部署到不同环境</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 创建功能分支</span>
</span></span><span class="line"><span class="cl">git checkout -b feature/new-feature main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 开发功能...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 提交修改</span>
</span></span><span class="line"><span class="cl">git commit -a -m <span class="s2">&#34;Add new feature&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 推送到远程仓库</span>
</span></span><span class="line"><span class="cl">git push origin feature/new-feature
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 在GitLab上创建Merge Request</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 审查通过后，合并到main分支</span>
</span></span><span class="line"><span class="cl">git checkout main
</span></span><span class="line"><span class="cl">git pull origin main
</span></span><span class="line"><span class="cl">git merge feature/new-feature
</span></span><span class="line"><span class="cl">git push origin main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建环境分支</span>
</span></span><span class="line"><span class="cl">git checkout -b production main
</span></span><span class="line"><span class="cl">git push origin production
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 部署到生产环境</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ...</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>优点：</strong></p>
<ul>
<li>简单且灵活</li>
<li>支持多环境部署</li>
<li>适合持续交付</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>环境分支管理需要额外工作</li>
<li>对于大型项目可能不够严格</li>
</ul>
<h2 id="git高级技巧">Git高级技巧<a hidden class="anchor" aria-hidden="true" href="#git高级技巧">#</a></h2>
<h3 id="钩子hooks">钩子(Hooks)<a hidden class="anchor" aria-hidden="true" href="#钩子hooks">#</a></h3>
<p>Git钩子是在特定事件发生时自动执行的脚本，可以用于自动化任务。</p>
<h4 id="常用钩子类型">常用钩子类型<a hidden class="anchor" aria-hidden="true" href="#常用钩子类型">#</a></h4>
<ol>
<li>
<p><strong>客户端钩子</strong>：</p>
<ul>
<li><code>pre-commit</code>：提交前运行</li>
<li><code>commit-msg</code>：编辑提交信息后运行</li>
<li><code>pre-push</code>：推送前运行</li>
</ul>
</li>
<li>
<p><strong>服务器端钩子</strong>：</p>
<ul>
<li><code>pre-receive</code>：接收推送时运行</li>
<li><code>update</code>：更新分支时运行</li>
<li><code>post-receive</code>：接收推送后运行</li>
</ul>
</li>
</ol>
<h4 id="示例pre-commit钩子">示例：pre-commit钩子<a hidden class="anchor" aria-hidden="true" href="#示例pre-commit钩子">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1"># .git/hooks/pre-commit</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 检查代码风格</span>
</span></span><span class="line"><span class="cl">npm run lint
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 如果检查失败，阻止提交</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;代码风格检查失败，请修复后再提交&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 运行测试</span>
</span></span><span class="line"><span class="cl">npm <span class="nb">test</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 如果测试失败，阻止提交</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;测试失败，请修复后再提交&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="子模块submodules">子模块(Submodules)<a hidden class="anchor" aria-hidden="true" href="#子模块submodules">#</a></h3>
<p>Git子模块允许你将一个Git仓库作为另一个Git仓库的子目录。</p>
<h4 id="添加子模块">添加子模块<a hidden class="anchor" aria-hidden="true" href="#添加子模块">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 添加子模块</span>
</span></span><span class="line"><span class="cl">git submodule add https://github.com/username/submodule-repository.git path/to/submodule
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 初始化子模块</span>
</span></span><span class="line"><span class="cl">git submodule init
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 更新子模块</span>
</span></span><span class="line"><span class="cl">git submodule update
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 递归克隆包含子模块的仓库</span>
</span></span><span class="line"><span class="cl">git clone --recursive https://github.com/username/repository.git
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="更新子模块">更新子模块<a hidden class="anchor" aria-hidden="true" href="#更新子模块">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 进入子模块目录</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> path/to/submodule
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 拉取最新代码</span>
</span></span><span class="line"><span class="cl">git pull origin main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 返回主仓库</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ..
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 提交子模块更新</span>
</span></span><span class="line"><span class="cl">git add path/to/submodule
</span></span><span class="line"><span class="cl">git commit -m <span class="s2">&#34;Update submodule&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="变基rebase高级用法">变基(Rebase)高级用法<a hidden class="anchor" aria-hidden="true" href="#变基rebase高级用法">#</a></h3>
<h4 id="交互式变基">交互式变基<a hidden class="anchor" aria-hidden="true" href="#交互式变基">#</a></h4>
<p>交互式变基允许你编辑、删除、合并或重新排序提交。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 对最近的3个提交进行交互式变基</span>
</span></span><span class="line"><span class="cl">git rebase -i HEAD~3
</span></span></code></pre></td></tr></table>
</div>
</div><p>在打开的编辑器中，你会看到类似这样的内容：</p>
<pre tabindex="0"><code>pick f7f3f6d Commit message 1
pick 310154e Commit message 2
pick a5f4a0d Commit message 3

# Rebase 1234567..a5f4a0d onto 1234567 (3 commands)
#
# Commands:
# p, pick &lt;commit&gt; = use commit
# r, reword &lt;commit&gt; = use commit, but edit the commit message
# e, edit &lt;commit&gt; = use commit, but stop for amending
# s, squash &lt;commit&gt; = use commit, but meld into previous commit
# f, fixup &lt;commit&gt; = like &#34;squash&#34;, but discard this commit&#39;s log message
# x, exec &lt;command&gt; = run command (the rest of the line) using shell
# b, break = stop here (continue rebase later with &#39;git rebase --continue&#39;)
# d, drop &lt;commit&gt; = remove commit
# l, label &lt;label&gt; = label current HEAD with a name
# t, reset &lt;label&gt; = reset HEAD to a label
# m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]
# .       create a merge commit using the original merge commit&#39;s
# .       message (or the oneline, if no original merge commit was
# .       specified). Use -c &lt;commit&gt; to re-use the original merge
# .       commit&#39;s author and message.
#
# These lines can be re-ordered; they are executed from top to bottom.
</code></pre><p>你可以通过修改命令前的关键字来改变提交的处理方式。</p>
<h4 id="变基-vs-合并">变基 vs 合并<a hidden class="anchor" aria-hidden="true" href="#变基-vs-合并">#</a></h4>
<p>变基和合并都是整合分支更改的方法，但它们有不同的工作方式：</p>
<p><strong>合并(Merge)</strong>：</p>
<ul>
<li>创建一个新的&quot;合并提交&quot;</li>
<li>保留完整的分支历史</li>
<li>适合公共分支</li>
</ul>
<p><strong>变基(Rebase)</strong>：</p>
<ul>
<li>将提交重新应用到目标分支</li>
<li>创建线性的提交历史</li>
<li>适合私有分支</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 合并分支</span>
</span></span><span class="line"><span class="cl">git checkout main
</span></span><span class="line"><span class="cl">git merge feature-branch
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 变基分支</span>
</span></span><span class="line"><span class="cl">git checkout feature-branch
</span></span><span class="line"><span class="cl">git rebase main
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="储藏stash">储藏(Stash)<a hidden class="anchor" aria-hidden="true" href="#储藏stash">#</a></h3>
<p>储藏允许你临时保存未提交的修改，以便切换分支或执行其他操作。</p>
<h4 id="基本储藏操作">基本储藏操作<a hidden class="anchor" aria-hidden="true" href="#基本储藏操作">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 储藏当前修改</span>
</span></span><span class="line"><span class="cl">git stash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 储藏并添加说明</span>
</span></span><span class="line"><span class="cl">git stash save <span class="s2">&#34;Work in progress&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看储藏列表</span>
</span></span><span class="line"><span class="cl">git stash list
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 应用最新储藏（不删除）</span>
</span></span><span class="line"><span class="cl">git stash apply
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 应用并删除最新储藏</span>
</span></span><span class="line"><span class="cl">git stash pop
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 应用指定储藏</span>
</span></span><span class="line"><span class="cl">git stash apply stash@<span class="o">{</span>1<span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除指定储藏</span>
</span></span><span class="line"><span class="cl">git stash drop stash@<span class="o">{</span>1<span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 清除所有储藏</span>
</span></span><span class="line"><span class="cl">git stash clear
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="高级储藏操作">高级储藏操作<a hidden class="anchor" aria-hidden="true" href="#高级储藏操作">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 储藏未跟踪的文件</span>
</span></span><span class="line"><span class="cl">git stash -u
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 储藏包括忽略的文件</span>
</span></span><span class="line"><span class="cl">git stash -a
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 从储藏创建分支</span>
</span></span><span class="line"><span class="cl">git stash branch new-branch stash@<span class="o">{</span>1<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="签选cherry-pick">签选(Cherry-pick)<a hidden class="anchor" aria-hidden="true" href="#签选cherry-pick">#</a></h3>
<p>签选允许你选择特定的提交，并将其应用到当前分支。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 签选指定提交</span>
</span></span><span class="line"><span class="cl">git cherry-pick commit-hash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 签选但不提交</span>
</span></span><span class="line"><span class="cl">git cherry-pick -n commit-hash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 签选并编辑提交信息</span>
</span></span><span class="line"><span class="cl">git cherry-pick -e commit-hash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 签选多个提交</span>
</span></span><span class="line"><span class="cl">git cherry-pick commit1 commit2 commit3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 签选一系列提交</span>
</span></span><span class="line"><span class="cl">git cherry-pick commit1..commit3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 中止签选</span>
</span></span><span class="line"><span class="cl">git cherry-pick --abort
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 继续签选（解决冲突后）</span>
</span></span><span class="line"><span class="cl">git cherry-pick --continue
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="引用日志reflog">引用日志(Reflog)<a hidden class="anchor" aria-hidden="true" href="#引用日志reflog">#</a></h3>
<p>引用日志记录了Git仓库中所有引用的更新，包括被删除的提交。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 查看引用日志</span>
</span></span><span class="line"><span class="cl">git reflog
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看指定分支的引用日志</span>
</span></span><span class="line"><span class="cl">git reflog show main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看引用日志并显示差异</span>
</span></span><span class="line"><span class="cl">git reflog show --stat
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 恢复被删除的提交</span>
</span></span><span class="line"><span class="cl">git reset --hard HEAD@<span class="o">{</span>1<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="二分查找bisect">二分查找(Bisect)<a hidden class="anchor" aria-hidden="true" href="#二分查找bisect">#</a></h3>
<p>二分查找是一个强大的工具，用于快速定位引入问题的提交。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 开始二分查找</span>
</span></span><span class="line"><span class="cl">git bisect start
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 标记当前提交为有问题</span>
</span></span><span class="line"><span class="cl">git bisect bad
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 标记已知正常的提交</span>
</span></span><span class="line"><span class="cl">git bisect good commit-hash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Git会自动切换到一个中间提交，测试后标记为good或bad</span>
</span></span><span class="line"><span class="cl">git bisect good  <span class="c1"># 或 git bisect bad</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 重复测试过程，直到找到问题提交</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 结束二分查找</span>
</span></span><span class="line"><span class="cl">git bisect reset
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="git最佳实践">Git最佳实践<a hidden class="anchor" aria-hidden="true" href="#git最佳实践">#</a></h2>
<h3 id="提交规范">提交规范<a hidden class="anchor" aria-hidden="true" href="#提交规范">#</a></h3>
<h4 id="提交信息格式">提交信息格式<a hidden class="anchor" aria-hidden="true" href="#提交信息格式">#</a></h4>
<p>良好的提交信息应该清晰、简洁，并遵循一定的格式：</p>
<pre tabindex="0"><code>&lt;类型&gt;(&lt;范围&gt;): &lt;主题&gt;

&lt;详细描述&gt;

&lt;页脚&gt;
</code></pre><p><strong>类型</strong>：</p>
<ul>
<li><code>feat</code>：新功能</li>
<li><code>fix</code>：修复bug</li>
<li><code>docs</code>：文档更新</li>
<li><code>style</code>：代码格式（不影响代码运行的变动）</li>
<li><code>refactor</code>：重构（既不是新增功能，也不是修改bug的代码变动）</li>
<li><code>perf</code>：性能优化</li>
<li><code>test</code>：增加测试</li>
<li><code>chore</code>：构建过程或辅助工具的变动</li>
</ul>
<p><strong>范围</strong>：可选，用于说明提交影响的范围，如<code>docs</code>, <code>api</code>, <code>core</code>等。</p>
<p><strong>主题</strong>：简洁描述提交内容，不超过50个字符。</p>
<p><strong>详细描述</strong>：可选，详细描述提交内容，每行不超过72个字符。</p>
<p><strong>页脚</strong>：可选，用于标记Breaking Changes或关闭Issue。</p>
<h4 id="示例提交信息">示例提交信息<a hidden class="anchor" aria-hidden="true" href="#示例提交信息">#</a></h4>
<pre tabindex="0"><code>feat(api): add user authentication endpoint

Add a new endpoint for user authentication using JWT tokens.
The endpoint supports both username/password and social login methods.

Closes #123
</code></pre><h3 id="分支命名规范">分支命名规范<a hidden class="anchor" aria-hidden="true" href="#分支命名规范">#</a></h3>
<p>良好的分支命名可以提高团队协作效率：</p>
<pre tabindex="0"><code>&lt;类型&gt;/&lt;描述&gt;

例如：
feature/user-authentication
fix/login-bug
docs/api-documentation
refactor/user-service
</code></pre><h3 id="代码审查">代码审查<a hidden class="anchor" aria-hidden="true" href="#代码审查">#</a></h3>
<p>代码审查是保证代码质量的重要环节，以下是一些建议：</p>
<ol>
<li><strong>保持小的提交</strong>：每次提交应该只关注一个功能或修复，便于审查。</li>
<li><strong>提供清晰的描述</strong>：在Pull Request中详细说明修改内容和原因。</li>
<li><strong>自动化检查</strong>：使用CI/CD工具自动运行测试和代码风格检查。</li>
<li><strong>关注代码逻辑</strong>：不仅关注代码风格，还要关注逻辑正确性和性能。</li>
<li><strong>提供建设性反馈</strong>：尊重他人，提供具体、可操作的建议。</li>
</ol>
<h3 id="常见问题解决">常见问题解决<a hidden class="anchor" aria-hidden="true" href="#常见问题解决">#</a></h3>
<h4 id="撤销已推送的提交">撤销已推送的提交<a hidden class="anchor" aria-hidden="true" href="#撤销已推送的提交">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 方法1：创建新的提交来撤销</span>
</span></span><span class="line"><span class="cl">git revert commit-hash
</span></span><span class="line"><span class="cl">git push origin main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 方法2：强制推送（谨慎使用）</span>
</span></span><span class="line"><span class="cl">git reset --hard HEAD~1
</span></span><span class="line"><span class="cl">git push --force origin main
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="合并错误的分支">合并错误的分支<a hidden class="anchor" aria-hidden="true" href="#合并错误的分支">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 撤销合并</span>
</span></span><span class="line"><span class="cl">git reset --hard HEAD~1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 如果已经推送</span>
</span></span><span class="line"><span class="cl">git revert -m <span class="m">1</span> commit-hash
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="清理历史记录">清理历史记录<a hidden class="anchor" aria-hidden="true" href="#清理历史记录">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 交互式变基清理历史</span>
</span></span><span class="line"><span class="cl">git rebase -i HEAD~n
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 强制推送（谨慎使用）</span>
</span></span><span class="line"><span class="cl">git push --force origin main
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="处理大文件">处理大文件<a hidden class="anchor" aria-hidden="true" href="#处理大文件">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 查找大文件</span>
</span></span><span class="line"><span class="cl">git rev-list --objects --all <span class="p">|</span> git cat-file --batch-check<span class="o">=</span><span class="s1">&#39;%(objecttype) %(objectname) %(objectsize) %(rest)&#39;</span> <span class="p">|</span> sed -n <span class="s1">&#39;s/^blob //p&#39;</span> <span class="p">|</span> sort -nrk <span class="m">2</span> <span class="p">|</span> head -n <span class="m">10</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用BFG Repo-Cleaner清理大文件</span>
</span></span><span class="line"><span class="cl">java -jar bfg.jar --strip-blobs-bigger-than 100M my-repo.git
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 清理并推送</span>
</span></span><span class="line"><span class="cl">git reflog expire --expire<span class="o">=</span>now --all
</span></span><span class="line"><span class="cl">git gc --prune<span class="o">=</span>now --aggressive
</span></span><span class="line"><span class="cl">git push --force origin main
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="总结">总结<a hidden class="anchor" aria-hidden="true" href="#总结">#</a></h2>
<p>Git是一个功能强大的版本控制系统，掌握其工作流程对于现代软件开发至关重要。本文从Git的基本概念和命令开始，逐步介绍了分支管理、各种工作流模型以及高级技巧。</p>
<p>通过学习和实践这些内容，你可以：</p>
<ol>
<li>高效管理个人项目的版本</li>
<li>与团队成员协作开发</li>
<li>处理复杂的合并和冲突</li>
<li>使用高级功能提高工作效率</li>
</ol>
<p>记住，Git的强大之处在于其灵活性，你可以根据项目需求选择合适的工作流程和工具。同时，良好的实践习惯（如清晰的提交信息、规范的分支命名）将使你的开发过程更加顺畅。</p>
<p>最后，Git是一个不断发展的工具，持续学习和探索新功能将帮助你更好地利用这个强大的版本控制系统。希望本文能够帮助你掌握Git工作流程，提高开发效率。</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/git/">Git</a></li>
      <li><a href="http://localhost:1313/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/">版本控制</a></li>
      <li><a href="http://localhost:1313/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="http://localhost:1313/posts/computer-vision-basics/">
    <span class="title">下一页 »</span>
    <br>
    <span>计算机视觉基础：从像素到理解</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Git工作流程：从入门到精通 on x"
            href="https://x.com/intent/tweet/?text=Git%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fgit-workflow%2f&amp;hashtags=Git%2c%e7%89%88%e6%9c%ac%e6%8e%a7%e5%88%b6%2c%e5%bc%80%e5%8f%91%e5%b7%a5%e5%85%b7">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Git工作流程：从入门到精通 on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fgit-workflow%2f&amp;title=Git%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a&amp;summary=Git%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fgit-workflow%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Git工作流程：从入门到精通 on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fgit-workflow%2f&title=Git%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Git工作流程：从入门到精通 on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fgit-workflow%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Git工作流程：从入门到精通 on whatsapp"
            href="https://api.whatsapp.com/send?text=Git%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fgit-workflow%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Git工作流程：从入门到精通 on telegram"
            href="https://telegram.me/share/url?text=Git%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fgit-workflow%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Git工作流程：从入门到精通 on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Git%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fgit-workflow%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
<div class="post-comments-container">
    <div class="post-comments-header">
        <h3 class="post-comments-title">评论</h3>
        <div class="post-comments-loading">加载评论中...</div>
    </div>
    <div class="giscus-wrapper" id="giscus-comments">
        
    </div>
</div>

<style>
    .post-comments-container {
        margin-top: 3rem;
        padding-top: 2rem;
        border-top: 1px solid var(--border);
    }
    
    .post-comments-header {
        margin-bottom: 1.5rem;
    }
    
    .post-comments-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin: 0 0 0.5rem 0;
        color: var(--primary);
    }
    
    .post-comments-loading {
        color: var(--secondary);
        font-size: 14px;
        text-align: center;
        padding: 20px;
    }
    
    .giscus-wrapper {
        border-radius: 8px;
        overflow: hidden;
    }
    
     
    @media (prefers-color-scheme: dark) {
        .giscus-wrapper {
            filter: brightness(0.9);
        }
    }
    
     
    @media (max-width: 768px) {
        .post-comments-container {
            margin-top: 2rem;
            padding-top: 1.5rem;
        }
        
        .post-comments-title {
            font-size: 1.25rem;
        }
    }
</style>

<script>
    console.log('Post-comments: Starting to load Giscus for blog post...');
    
    
    let retryCount = 0;
    const maxRetries = 5; 
    let isLoading = false;
    
    
    const isGitHubPages = window.location.hostname.includes('github.io') ||
                          window.location.hostname.includes('github.com');
    
    console.log('Post-comments: Environment detected:', isGitHubPages ? 'GitHub Pages' : 'Local/Other');
    
    
    function validateGiscusConfig() {
        const giscusRepo = 'litianfugt\/litianfugt.github.io';
        const giscusRepoId = 'R_kgDOPkZVNQ';
        const giscusCategory = 'General';
        const giscusCategoryId = 'DIC_kwDOPkZVNc4Cv3cN';
        
        const config = {
            repo: giscusRepo || 'litianfugt/litianfugt.github.io',
            repoId: giscusRepoId || 'R_kgDOPkZVNQ',
            category: giscusCategory || 'General',
            categoryId: giscusCategoryId || 'DIC_kwDOPkZVNc4Cv3cN'
        };
        
        console.log('Post-comments: Giscus config validated:', config);
        return config;
    }
    
    
    function loadPostComments() {
        if (isLoading) {
            console.log('Post-comments: Already loading, skipping...');
            return;
        }
        
        isLoading = true;
        console.log('Post-comments: Loading Giscus for blog post, attempt:', retryCount + 1);
        
        const giscusWrapper = document.getElementById('giscus-comments');
        if (!giscusWrapper) {
            console.error('Post-comments: Giscus wrapper not found');
            isLoading = false;
            return;
        }
        
        
        const existingFrame = giscusWrapper.querySelector('iframe.giscus-frame');
        const existingScript = giscusWrapper.querySelector('script[src*="giscus.app/client.js"]');
        
        if (existingFrame) {
            console.log('Post-comments: Removing existing frame');
            existingFrame.remove();
        }
        
        if (existingScript) {
            console.log('Post-comments: Removing existing script');
            existingScript.remove();
        }
        
        
        const loading = document.querySelector('.post-comments-loading');
        if (loading) {
            loading.style.display = 'block';
            loading.textContent = '加载评论中...';
            loading.style.color = '';
        }
        
        
        const pageTitle = document.title;
        const pagePath = window.location.pathname;
        const pageUrl = window.location.href;
        
        
        const config = validateGiscusConfig();
        
        
        const script = document.createElement('script');
        script.src = 'https://giscus.app/client.js';
        
        console.log('Post-comments: Using Giscus config:', config);
        
        
        script.setAttribute('data-repo', config.repo);
        script.setAttribute('data-repo-id', config.repoId);
        script.setAttribute('data-category', config.category);
        script.setAttribute('data-category-id', config.categoryId);
        script.setAttribute('data-mapping', 'pathname');
        script.setAttribute('data-term', pagePath);
        script.setAttribute('data-title', pageTitle);
        script.setAttribute('data-url', pageUrl);
        script.setAttribute('data-strict', '0');
        script.setAttribute('data-reactions-enabled', '1');
        script.setAttribute('data-emit-metadata', '0');
        script.setAttribute('data-input-position', 'bottom');
        script.setAttribute('data-theme', 'preferred_color_scheme');
        script.setAttribute('data-lang', 'zh-CN');
        
        
        script.setAttribute('data-loading', isGitHubPages ? 'eager' : 'lazy');
        script.setAttribute('crossorigin', 'anonymous');
        script.setAttribute('async', '');
        
        
        const timeout = setTimeout(() => {
            console.error('Post-comments: Giscus load timeout');
            script.dispatchEvent(new Event('error'));
        }, isGitHubPages ? 15000 : 10000); 
        
        
        script.addEventListener('load', () => {
            clearTimeout(timeout);
            console.log('Post-comments: Giscus loaded successfully');
            const loading = document.querySelector('.post-comments-loading');
            if (loading) {
                loading.style.display = 'none';
            }
            
            retryCount = 0;
            isLoading = false;
            
            
            setTimeout(() => {
                updatePostCommentCount();
            }, 1000); 
        });
        
        
        script.addEventListener('error', () => {
            clearTimeout(timeout);
            console.error('Post-comments: Giscus load error');
            retryCount++;
            
            if (retryCount < maxRetries) {
                console.log('Post-comments: Retrying to load Giscus, attempt:', retryCount + 1);
                const loading = document.querySelector('.post-comments-loading');
                if (loading) {
                    loading.textContent = `评论加载失败，正在重试 (${retryCount}/${maxRetries})...`;
                    loading.style.color = '#FF9800';
                }
                
                
                const retryDelay = isGitHubPages ? 3000 : 2000;
                setTimeout(() => {
                    isLoading = false;
                    loadPostComments();
                }, retryDelay);
            } else {
                const loading = document.querySelector('.post-comments-loading');
                if (loading) {
                    loading.innerHTML = `
                        评论加载失败，请尝试以下解决方案：<br>
                        1. 刷新页面重试<br>
                        2. 检查网络连接<br>
                        3. 确认已登录GitHub账户<br>
                        <button onclick="loadPostComments()" style="margin-top: 10px; padding: 5px 10px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;">手动重试</button>
                    `;
                    loading.style.color = '#F44336';
                }
                isLoading = false;
            }
        });
        
        
        giscusWrapper.appendChild(script);
        console.log('Post-comments: Giscus script added to page');
    }
    
    
    function waitForPageLoad(callback, maxAttempts = 20, interval = 500) {
        let attempts = 0;
        
        function check() {
            attempts++;
            console.log('Post-comments: Checking if page is fully loaded, attempt:', attempts);
            
            
            if (document.readyState === 'complete') {
                console.log('Post-comments: Page is fully loaded');
                callback();
            } else if (attempts < maxAttempts) {
                setTimeout(check, interval);
            } else {
                console.warn('Post-comments: Page did not fully load after maximum attempts, proceeding anyway');
                callback();
            }
        }
        
        check();
    }
    
    
    function isGiscusLoaded() {
        const giscusFrame = document.querySelector('#giscus-comments iframe.giscus-frame');
        const giscusScript = document.querySelector('#giscus-comments script[src*="giscus.app/client.js"]');
        return !!(giscusFrame || giscusScript);
    }
    
    
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Post-comments: DOM loaded, preparing to load comments...');
        
        
        waitForPageLoad(() => {
            console.log('Post-comments: Page is ready, loading comments...');
            
            
            if (!isGiscusLoaded()) {
                loadPostComments();
            } else {
                console.log('Post-comments: Giscus already loaded, skipping...');
            }
        });
    });
    
    
    window.addEventListener('load', function() {
        console.log('Post-comments: Window loaded, checking if comments need to be loaded...');
        
        
        if (!isGiscusLoaded()) {
            console.log('Post-comments: Comments not loaded yet, loading now...');
            loadPostComments();
        }
    });
    
    
    setTimeout(() => {
        console.log('Post-comments: First delayed load check for GitHub Pages...');
        if (!isGiscusLoaded()) {
            console.log('Post-comments: Comments still not loaded after first delay, trying again...');
            
            retryCount = 0;
            loadPostComments();
        }
    }, 3000); 
    
    setTimeout(() => {
        console.log('Post-comments: Second delayed load check for GitHub Pages...');
        if (!isGiscusLoaded()) {
            console.log('Post-comments: Comments still not loaded after second delay, trying with reset...');
            
            retryCount = 0;
            isLoading = false;
            loadPostComments();
        }
    }, 6000); 
    
    setTimeout(() => {
        console.log('Post-comments: Final delayed load check for GitHub Pages...');
        if (!isGiscusLoaded()) {
            console.log('Post-comments: Comments still not loaded after final delay, showing error...');
            const loading = document.querySelector('.post-comments-loading');
            if (loading) {
                loading.innerHTML = `
                    评论系统加载失败，请尝试以下解决方案：<br>
                    1. 刷新页面重试<br>
                    2. 检查网络连接<br>
                    3. 确认已登录GitHub账户<br>
                    <button onclick="retryLoadComments()" style="margin-top: 10px; padding: 8px 16px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;">手动重试</button>
                `;
                loading.style.color = '#F44336';
            }
        }
    }, 10000); 
    
    
    window.retryLoadComments = function() {
        console.log('Post-comments: Manual retry triggered');
        retryCount = 0;
        isLoading = false;
        loadPostComments();
    };
    
    
    if (typeof window.addEventListener !== 'undefined') {
        window.addEventListener('popstate', function() {
            console.log('Post-comments: Page navigation detected, reloading comments...');
            
            retryCount = 0;
            setTimeout(() => {
                loadPostComments();
            }, 100);
        });
    }
    
    
    if (window.matchMedia) {
        const colorSchemeQuery = window.matchMedia('(prefers-color-scheme: dark)');
        colorSchemeQuery.addEventListener('change', (e) => {
            console.log('Post-comments: Color scheme changed, reloading comments...');
            
            retryCount = 0;
            setTimeout(() => {
                loadPostComments();
            }, 100);
        });
    }
    
    console.log('Post-comments: Comment system initialized for blog post');
    
    
    async function updatePostCommentCount() {
        console.log('Post-comments: Updating comment count');
        
        try {
            
            const pagePath = window.location.pathname;
            const pageTitle = document.title;
            
            
            const repo = 'litianfugt\/litianfugt.github.io';
            const categoryId = 'DIC_kwDOPkZVNc4Cv3cN';
            
            if (!repo || !categoryId) {
                console.warn('Post-comments: Giscus configuration not found');
                return;
            }
            
            
            const query = `
                query {
                    repository(owner: "${repo.split('/')[0]}", name: "${repo.split('/')[1]}") {
                        discussions(categoryId: "${categoryId}", first: 100) {
                            nodes {
                                title
                                url
                                comments {
                                    totalCount
                                }
                            }
                        }
                    }
                }
            `;
            
            
            const response = await fetch('https://api.github.com/graphql', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ query })
            });
            
            if (!response.ok) {
                console.warn('Post-comments: GraphQL request failed, trying REST API');
                
                await updateCommentCountFromREST(pagePath, pageTitle, repo, categoryId);
                return;
            }
            
            const data = await response.json();
            
            
            if (data.errors) {
                console.warn('Post-comments: GraphQL errors detected, trying REST API:', data.errors);
                await updateCommentCountFromREST(pagePath, pageTitle, repo, categoryId);
                return;
            }
            
            const discussions = data.data.repository.discussions.nodes;
            
            
            let discussion = null;
            
            
            discussion = discussions.find(d => d.url.includes(pagePath));
            
            
            if (!discussion) {
                discussion = discussions.find(d => d.title === pageTitle || d.title.includes(pagePath));
            }
            
            if (discussion) {
                const count = discussion.comments.totalCount;
                console.log('Post-comments: Found discussion with', count, 'comments');
                
                
                
                const commentCountElements = document.querySelectorAll('.post-comment-count');
                commentCountElements.forEach(element => {
                    element.textContent = count;
                });
                
                
                localStorage.setItem(`post-comment-count-${pagePath}`, count);
            } else {
                console.log('Post-comments: No discussion found for this page');
                
                const commentCountElements = document.querySelectorAll('.post-comment-count');
                commentCountElements.forEach(element => {
                    element.textContent = '0';
                });
                localStorage.setItem(`post-comment-count-${pagePath}`, '0');
            }
        } catch (error) {
            console.error('Post-comments: Error updating comment count:', error);
            
            try {
                const pagePath = window.location.pathname;
                const pageTitle = document.title;
                const repo = 'litianfugt\/litianfugt.github.io';
                const categoryId = 'DIC_kwDOPkZVNc4Cv3cN';
                await updateCommentCountFromREST(pagePath, pageTitle, repo, categoryId);
            } catch (restError) {
                console.error('Post-comments: REST API also failed:', restError);
            }
        }
    }
    
    
    async function updateCommentCountFromREST(pagePath, pageTitle, repo, categoryId) {
        console.log('Post-comments: Using REST API to update comment count');
        
        try {
            
            const apiUrl = `https://api.github.com/repos/${repo}/discussions?category_id=${categoryId}&per_page=100`;
            
            const response = await fetch(apiUrl, {
                method: 'GET',
                headers: {
                    'Accept': 'application/vnd.github.v3+json'
                }
            });
            
            if (!response.ok) {
                throw new Error(`GitHub REST API request failed: ${response.status}`);
            }
            
            const discussions = await response.json();
            
            
            let discussion = null;
            
            
            discussion = discussions.find(d => d.url && d.url.includes(pagePath));
            
            
            if (!discussion) {
                discussion = discussions.find(d => d.title === pageTitle || (d.title && d.title.includes(pagePath)));
            }
            
            if (discussion) {
                const count = discussion.comments || 0;
                console.log('Post-comments: Found discussion via REST API with', count, 'comments');
                
                
                const commentCountElements = document.querySelectorAll('.post-comment-count');
                commentCountElements.forEach(element => {
                    element.textContent = count;
                });
                
                
                localStorage.setItem(`post-comment-count-${pagePath}`, count);
            } else {
                console.log('Post-comments: No discussion found for this page via REST API');
                
                const commentCountElements = document.querySelectorAll('.post-comment-count');
                commentCountElements.forEach(element => {
                    element.textContent = '0';
                });
                localStorage.setItem(`post-comment-count-${pagePath}`, '0');
            }
        } catch (error) {
            console.error('Post-comments: REST API error:', error);
            
            const storedCount = localStorage.getItem(`post-comment-count-${pagePath}`);
            const count = storedCount !== null ? storedCount : '0';
            
            const commentCountElements = document.querySelectorAll('.post-comment-count');
            commentCountElements.forEach(element => {
                element.textContent = count;
            });
        }
    }
    
    
    function restorePostCommentCount() {
        const pagePath = window.location.pathname;
        const storedCount = localStorage.getItem(`post-comment-count-${pagePath}`);
        
        if (storedCount !== null) {
            const commentCountElements = document.querySelectorAll('.post-comment-count');
            commentCountElements.forEach(element => {
                element.textContent = storedCount;
            });
            console.log('Post-comments: Restored comment count from localStorage:', storedCount);
        }
    }
    
    
    restorePostCommentCount();
</script>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">李石原的博客</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
